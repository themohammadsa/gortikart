{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/dashi/Documents/GitHub/gortikart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/dashi/Documents/GitHub/gortikart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/dashi/Documents/GitHub/gortikart/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\dashi\\\\Documents\\\\GitHub\\\\gortikart\\\\src\\\\context\\\\HomeContext.js\",\n    _this = this,\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useContext, createContext, useReducer, useState, useEffect } from 'react';\nimport { ReducerFunction } from '../reducer/ReducerFunction';\nimport { getProducts } from '../services/getProducts';\nimport { getUserData } from '../services/getUserData';\nimport { useAuthContext } from './AuthProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar HomeContext = /*#__PURE__*/createContext();\nexport var HomeProvider = function HomeProvider(_ref) {\n  _s();\n\n  var children = _ref.children;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      database = _useState2[0],\n      setDatabase = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loader = _useState4[0],\n      setLoader = _useState4[1];\n\n  var _useAuthContext = useAuthContext(),\n      token = _useAuthContext.token;\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var products, _yield$getUserData, cart, wishlist;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!token) {\n              _context.next = 13;\n              break;\n            }\n\n            _context.next = 3;\n            return getProducts();\n\n          case 3:\n            products = _context.sent;\n            _context.next = 6;\n            return getUserData();\n\n          case 6:\n            _yield$getUserData = _context.sent;\n            cart = _yield$getUserData.cart;\n            wishlist = _yield$getUserData.wishlist;\n            updateData(cart, products, 'cart');\n            updateData(wishlist, products, 'wishlist');\n            setLoader(true);\n            setDatabase(products);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [token]);\n\n  var updateData = function updateData(categoryData, products, categoryName) {\n    var updatedData = categoryData.map(function (productId) {\n      var updatedProductData = products.find(function (product) {\n        return product.id === productId;\n      });\n      return updatedProductData;\n    });\n    state[\"\".concat(categoryName)] = updatedData;\n  };\n\n  var initialState = {\n    wishList: [],\n    cart: [],\n    sortBy: '',\n    FAST_DELIVERY: false,\n    INCLUDE_OUT_OF_STOCK: false,\n    search: '',\n    filterBy: [],\n    sortCategories: ['Most Reviews', 'Popularity', 'Price: High to Low', 'Price: Low to High'],\n    filterCategories: {\n      Categories: ['Tablets', 'Laptops', 'Desktops', 'Accessories'],\n      Availability: ['Include out of stock'],\n      Delivery: ['Fast Delivery']\n    }\n  };\n\n  var _useReducer = useReducer(ReducerFunction, initialState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var getSortedData = function getSortedData(productList, sortBy) {\n    switch (sortBy) {\n      case 'PRICE:_HIGH_TO_LOW':\n        return productList.sort(function (a, b) {\n          return b.price - a.price;\n        });\n\n      case 'PRICE:_LOW_TO_HIGH':\n        return productList.sort(function (a, b) {\n          return a.price - b.price;\n        });\n\n      case 'POPULARITY':\n        return productList.sort(function (a, b) {\n          return b.offer - a.offer;\n        });\n\n      case 'MOST_REVIEWS':\n        return productList.sort(function (a, b) {\n          return b.totalReviews - a.totalReviews;\n        });\n\n      default:\n        return productList;\n    }\n  };\n\n  var getFilteredData = function getFilteredData(productList, INCLUDE_OUT_OF_STOCK, FAST_DELIVERY, search, filterBy) {\n    return productList.filter(function (item) {\n      return FAST_DELIVERY ? item.fastDelivery : item;\n    }).filter(function (item) {\n      return INCLUDE_OUT_OF_STOCK ? item : item.inStock;\n    }).filter(function (item) {\n      return filterBy.length > 0 ? filterBy.includes(item.categories.toUpperCase()) : item;\n    }).filter(function (item) {\n      return item.name.toUpperCase().includes(search.toUpperCase());\n    });\n  };\n\n  var sortedData = getSortedData(database, state.sortBy);\n  var filteredData = getFilteredData(sortedData, state.INCLUDE_OUT_OF_STOCK, state.FAST_DELIVERY, state.search, state.filterBy);\n  return /*#__PURE__*/_jsxDEV(HomeContext.Provider, {\n    value: {\n      state: state,\n      filteredData: filteredData,\n      dispatch: dispatch,\n      loader: loader,\n      setLoader: setLoader\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(HomeProvider, \"d7MD7j9FHUKbDmMPSj1mah+N1tY=\", false, function () {\n  return [useAuthContext];\n});\n\n_c = HomeProvider;\nexport var useHomeContext = function useHomeContext() {\n  _s2();\n\n  return useContext(HomeContext);\n};\n\n_s2(useHomeContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"HomeProvider\");","map":{"version":3,"sources":["C:/Users/dashi/Documents/GitHub/gortikart/src/context/HomeContext.js"],"names":["useContext","createContext","useReducer","useState","useEffect","ReducerFunction","getProducts","getUserData","useAuthContext","HomeContext","HomeProvider","children","database","setDatabase","loader","setLoader","token","products","cart","wishlist","updateData","categoryData","categoryName","updatedData","map","productId","updatedProductData","find","product","id","state","initialState","wishList","sortBy","FAST_DELIVERY","INCLUDE_OUT_OF_STOCK","search","filterBy","sortCategories","filterCategories","Categories","Availability","Delivery","dispatch","getSortedData","productList","sort","a","b","price","offer","totalReviews","getFilteredData","filter","item","fastDelivery","inStock","length","includes","categories","toUpperCase","name","sortedData","filteredData","useHomeContext"],"mappings":"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","sourcesContent":["import {\r\n  useContext,\r\n  createContext,\r\n  useReducer,\r\n  useState,\r\n  useEffect,\r\n} from 'react';\r\nimport { ReducerFunction } from '../reducer/ReducerFunction';\r\nimport { getProducts } from '../services/getProducts';\r\nimport { getUserData } from '../services/getUserData';\r\nimport { useAuthContext } from './AuthProvider';\r\n\r\nconst HomeContext = createContext();\r\n\r\nexport const HomeProvider = ({ children }) => {\r\n  const [database, setDatabase] = useState([]);\r\n  const [loader, setLoader] = useState(false);\r\n  const { token } = useAuthContext();\r\n\r\n  useEffect(async () => {\r\n    if (token) {\r\n      const products = await getProducts();\r\n      const { cart, wishlist } = await getUserData();\r\n      updateData(cart, products, 'cart');\r\n      updateData(wishlist, products, 'wishlist');\r\n      setLoader(true);\r\n      setDatabase(products);\r\n    }\r\n  }, [token]);\r\n\r\n  const updateData = (categoryData, products, categoryName) => {\r\n    const updatedData = categoryData.map((productId) => {\r\n      const updatedProductData = products.find(\r\n        (product) => product.id === productId\r\n      );\r\n      return updatedProductData;\r\n    });\r\n    state[`${categoryName}`] = updatedData;\r\n  };\r\n\r\n  const initialState = {\r\n    wishList: [],\r\n    cart: [],\r\n    sortBy: '',\r\n    FAST_DELIVERY: false,\r\n    INCLUDE_OUT_OF_STOCK: false,\r\n    search: '',\r\n    filterBy: [],\r\n    sortCategories: [\r\n      'Most Reviews',\r\n      'Popularity',\r\n      'Price: High to Low',\r\n      'Price: Low to High',\r\n    ],\r\n    filterCategories: {\r\n      Categories: ['Tablets', 'Laptops', 'Desktops', 'Accessories'],\r\n      Availability: ['Include out of stock'],\r\n      Delivery: ['Fast Delivery'],\r\n    },\r\n  };\r\n\r\n  const [state, dispatch] = useReducer(ReducerFunction, initialState);\r\n  const getSortedData = (productList, sortBy) => {\r\n    switch (sortBy) {\r\n      case 'PRICE:_HIGH_TO_LOW':\r\n        return productList.sort((a, b) => b.price - a.price);\r\n      case 'PRICE:_LOW_TO_HIGH':\r\n        return productList.sort((a, b) => a.price - b.price);\r\n      case 'POPULARITY':\r\n        return productList.sort((a, b) => b.offer - a.offer);\r\n      case 'MOST_REVIEWS':\r\n        return productList.sort((a, b) => b.totalReviews - a.totalReviews);\r\n      default:\r\n        return productList;\r\n    }\r\n  };\r\n\r\n  const getFilteredData = (\r\n    productList,\r\n    INCLUDE_OUT_OF_STOCK,\r\n    FAST_DELIVERY,\r\n    search,\r\n    filterBy\r\n  ) => {\r\n    return productList\r\n      .filter((item) => (FAST_DELIVERY ? item.fastDelivery : item))\r\n      .filter((item) => (INCLUDE_OUT_OF_STOCK ? item : item.inStock))\r\n      .filter((item) =>\r\n        filterBy.length > 0\r\n          ? filterBy.includes(item.categories.toUpperCase())\r\n          : item\r\n      )\r\n      .filter((item) => item.name.toUpperCase().includes(search.toUpperCase()));\r\n  };\r\n\r\n  const sortedData = getSortedData(database, state.sortBy);\r\n  const filteredData = getFilteredData(\r\n    sortedData,\r\n    state.INCLUDE_OUT_OF_STOCK,\r\n    state.FAST_DELIVERY,\r\n    state.search,\r\n    state.filterBy\r\n  );\r\n\r\n  return (\r\n    <HomeContext.Provider\r\n      value={{ state, filteredData, dispatch, loader, setLoader }}\r\n    >\r\n      {children}\r\n    </HomeContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useHomeContext = () => {\r\n  return useContext(HomeContext);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}